<html>
<head>
<!--<script type="text/javascript" src="main/scripts/jquery-3.3.1.min.js">-->
</script>
	
<script> 

var Player = function(name){
	this.name = name;
	this.age = '18';
	this.health = 100;
	this.getHealth = function() {
		return this.health + "%";
	}
	this.bodyStatus = ['Стоит','Сидит','Лежит'];
	this.currentBodyStatus = 0;
	
	function Actions(id,name) {
		this.id = id;
		this.name = name;
		this.available = true;
		this.activate = function () {
			this.available = true;
		}
		this.deactivate = function () {
			this.available = false;
		}
		
	}
	this.actionsArray = [];
	this.actionsArray[0] = new Actions ('0','Прилечь');
	this.lie = this.actionsArray[0];
	this.actionsArray[1] = new Actions ('1','Присесть');
	this.sit = this.actionsArray[1];
	this.actionsArray[2] = new Actions ('2','Встать');
	this.getup = this.actionsArray[2];
	this.actionsArray[3] = new Actions ('3','Подпрыгнуть');
	this.jump = this.actionsArray[3];
	this.actionsArray[4] = new Actions ('4','Открыть');
	this.open = this.actionsArray[4];
	this.actionsArray[5] = new Actions ('5','Взять');
	this.take = this.actionsArray[5];
	this.actionsArray[6] = new Actions ('6','Вставить');
	this.insert = this.actionsArray[6];
	this.actionsArray[7] = new Actions ('7','Осмотреть');
	this.inspect = this.actionsArray[7];
}

var Room = function(title, adress) {
	this.title = title;
	this.adress = adress;
	this.img = 'none';
	this.text = 'Нет текста';
	this.setText = function(text) {
		this.text = text;
	}
}



function new_game() {
	document.getElementById("main-menu").style.display = "none";
	
	//Создаем нового игрока
	
	//Запускаем игрока в комнату
	first_room();
}



//Создаем комнату
function first_room() {
	var player = new Player('Сычев');
	//Наполняем комнату
	var room_test = new Room('Клетка Сыча','Этаж 522, сектор Г');
	room_test.setText('Вы в пустой комнате. Стальная дверь без ручки без замка. Обычное пластиковое окно с подоконником, но за окном - кирпичная кладка. На полу ковер.<br>');
	

	//наполняем интерфейс
	var main_w = document.getElementById('main-div');
	
	var room_title = document.createElement('div');
	room_title.id = 'room_title';
	room_title.className +=" pre";
	main_w.appendChild(room_title);
	room_title.innerHTML = room_test.title + ' : ' + room_test.adress;
	
	var room_image = document.createElement('div');
	room_image.id = 'room_image';
	room_image.className +=" pre";
	main_w.appendChild(room_image);
	room_image.innerHTML = '<img src="' + room_test.img + '">'
	
	var room_textArea = document.createElement('div');
	room_textArea.id = 'room_textArea';
	room_textArea.className +=" pre";
	main_w.appendChild(room_textArea);
	
		var actualText = document.createElement('div');
		actualText.id = 'actualText';
		actualText.className +=" pre";
		actualText.innerHTML = room_test.text;
		room_textArea.appendChild(actualText);
		
		var playerStatus = document.createElement('div');
		playerStatus.id = 'playerStatus';
		playerStatus.className +=" pre";
		room_textArea.appendChild(playerStatus);
			
			var namePlayerStatus = document.createElement('div');
			namePlayerStatus.id = 'namePlayerStatus';
			namePlayerStatus.className = "pre";
			namePlayerStatus.innerHTML = player.name;
			playerStatus.appendChild(namePlayerStatus);
			
			var healthPlayerStatus = document.createElement('div');
			healthPlayerStatus.id = 'healthPlayerStatus';
			healthPlayerStatus.className = "pre";
			healthPlayerStatus.innerHTML = player.getHealth();
			playerStatus.appendChild(healthPlayerStatus);
			
			var bodyPlayerStatus = document.createElement('div');
			bodyPlayerStatus.id = 'bodyPlayerStatus';
			bodyPlayerStatus.className = "pre";
			bodyPlayerStatus.innerHTML = player.bodyStatus[0];
			playerStatus.appendChild(bodyPlayerStatus);
	
	var room_actions = document.createElement('div');
	room_actions.id = 'room_actions';
	room_actions.className +=" pre";
	main_w.appendChild(room_actions);

	
	//распихиваем активные кнопки
	function check_actions() {
		room_actions.innerHTML = '';
		for (i=0;i<player.actionsArray.length;i++) {
			if (player.actionsArray[i].available == true) {
				var button = document.createElement('div');
				button.id = 'action'+player.actionsArray[i].id;
				button.className = "button pre";
				button.style.position = "absolute";
				button.style.height = "25px";
				button.style.width = "140px";
				if (i % 2) {
					button.style.left = "150px";
					button.style.top = (i-1) * 20 + 4 + 'px';
				}
				else {
					button.style.left = "5px";
					button.style.top = i * 20 + 4 + 'px';
				}
				
				room_actions.appendChild(button);
				button.innerHTML = player.actionsArray[i].name;
				//if (i % 2) room_actions.innerHTML += '<br>';
			}
		}
	}
	check_actions();
	function lie() {
		if (player.currentBodyStatus == 2) {
			actualText.innerHTML += "@<br>Вы уже лежите<br>"
		}
		else {
			player.currentBodyStatus = 2;
			bodyPlayerStatus.innerHTML = player.bodyStatus[2];
			actualText.innerHTML += "@<br>Вы легли<br>"
		}
		actualText.scrollTop = actualText.scrollHeight;
	}
	function getUp() {
		if (player.currentBodyStatus == 0) {
			actualText.innerHTML += "@<br>Вы уже стоите<br>"
		}
		else {
			player.currentBodyStatus = 0;
			bodyPlayerStatus.innerHTML = player.bodyStatus[0];
			actualText.innerHTML += "@<br>Вы встали<br>"
		}
		actualText.scrollTop = actualText.scrollHeight;
	}
	function sit() {
		if (player.currentBodyStatus == 1) {
			actualText.innerHTML += "@<br>Вы уже сидите<br>"
		}
		else {
			player.currentBodyStatus = 1;
			bodyPlayerStatus.innerHTML = player.bodyStatus[1];
			actualText.innerHTML += "@<br>Вы сели<br>"
		}
		actualText.scrollTop = actualText.scrollHeight;
	}
	
	
	
	document.getElementById('action'+player.lie.id).onclick=function(){ lie(); };
	document.getElementById('action'+player.getup.id).onclick=function(){ getUp(); };
	document.getElementById('action'+player.sit.id).onclick=function(){ sit(); };
	
	
	
}


function load_game() {
	
}
</script>
<title>ВНИМАНИЕ НАЧИНАЕТСЯ САМОСБОР</title>
<link rel="stylesheet" href="css/minetheme.css">
</head>
<body>

<div id="main-div">
	<div id="main-menu" class="pre">
		<a class="a_button" onClick="new_game()" href="#">Новая игра</a><br>
		<!--<a class="a_button" onClick="load_game()" href="#">Загрузить игру</a>-->
	</div>
</div>

</body>
</html>
